(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[0],{126:function(e,t,r){},146:function(e,t,r){},174:function(e,t,r){},194:function(e,t,r){},277:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(15),s=r.n(c),i=(r(174),r(40)),l=r(288),o=r(293),u=r(36),j=r(46),d=r(22),b=r.n(d),x=r(43),h=r.n(x);function p(){return p=Object(j.a)(b.a.mark((function e(){var t,r,n=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:3,e.next=3,h.a.get("/m/api/extractions",{params:{past_days:t}});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function m(){return(m=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/m/api/extractions/future");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/m/api/user/permissions");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}h.a.defaults.xsrfHeaderName="X-CSRFToken";var f=r(13),g=r(283),v=r(53),y=r(296),w=r(56),C=r(54),F=r(89),N=r(284),S=r(285),k=r(286),L=r(153),P=r(294),D=r(287),M=(r(194),r(126),r(2)),z=function(){return Object(M.jsx)(o.a.Body,{className:"flex-container",children:Object(M.jsxs)("div",{className:"text-center",children:[Object(M.jsx)("div",{className:"error-size bottom-text",children:Object(M.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"currentColor",class:"bi bi-exclamation-triangle error-anim",viewBox:"0 0 16 16",children:[Object(M.jsx)("path",{d:"M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"}),Object(M.jsx)("path",{d:"M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"})]})}),Object(M.jsx)("h3",{className:"text-margin",children:"Error Loading Component"})]})})};var _={option:function(e){return Object(f.a)(Object(f.a)({},e),{},{color:"black"})}};function A(e){var t=e.message;return Object(M.jsx)(g.a,{id:"character_tooltip",children:t})}function B(e){var t=e.column;t.filterValue,t.preFilteredRows,t.setFilter;return Object(M.jsx)(M.Fragment,{})}function E(e){var t=e.column,r=t.filterValue,n=t.preFilteredRows,a=t.setFilter,c=n.length;return Object(M.jsx)("input",{className:"form-control",value:r||"",onChange:function(e){a(e.target.value||void 0)},placeholder:"Search ".concat(c," records...")})}var H=function(){return{}};var R=function(e){var t=e.isLoading,r=e.isFetching,n=e.data,c=e.error,s=e.columns,i=e.asyncExpandFunction,l=e.getRowProps,o=void 0===l?H:l,u=e.defaultSort,j=void 0===u?[]:u,d=a.a.useMemo((function(){return{Filter:B}}),[]),b=a.a.useMemo((function(){return{text:function(e,t,r){return e.filter((function(e){return t.some((function(t){if(r){var n=e.values[t];return"object"===typeof n&&(n=n.name),e.hasOwnProperty("originalSubRows")&&(n+=e.originalSubRows.reduce((function(e,r){return e+" "+(n=r,t.split(".").reduce((function(e,t){return e[t]}),n));var n}),"")),!!n&&n.toLowerCase().includes(r.toLowerCase())}return!0}))}))}}}),[]),x=Object(w.useTable)({columns:s,data:n,defaultColumn:d,filterTypes:b,initialState:{pageSize:20,sortBy:j}},w.useFilters,w.useSortBy,w.useExpanded,w.usePagination),h=x.getTableProps,p=x.getTableBodyProps,m=x.headerGroups,O=x.page,g=x.prepareRow,C=x.canPreviousPage,_=x.canNextPage,E=x.pageOptions,R=x.pageCount,T=x.gotoPage,I=x.nextPage,V=x.previousPage,G=x.setPageSize,Q=x.visibleColumns,J=x.state,K=J.pageIndex,U=J.pageSize;return t?Object(M.jsx)("div",{className:"col-xs-12 text-center",children:Object(M.jsx)(F.a,{className:"spinner-size"})}):c?Object(M.jsx)(z,{}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(N.a,{striped:!0,children:[Object(M.jsxs)("thead",Object(f.a)(Object(f.a)({},h()),{},{children:[m.map((function(e){return Object(M.jsx)("tr",Object(f.a)(Object(f.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(M.jsxs)("th",Object(f.a)(Object(f.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(M.jsx)("span",{className:"pull-right",children:e.canSort?e.isSorted?e.isSortedDesc?Object(M.jsx)(S.a,{glyph:"sort-by-attributes-alt"}):Object(M.jsx)(S.a,{glyph:"sort-by-attributes"}):Object(M.jsx)(S.a,{glyph:"sort"}):""})]}))}))}))})),m.map((function(e){return Object(M.jsx)("tr",Object(f.a)(Object(f.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(M.jsx)("th",Object(f.a)(Object(f.a)({},e.getHeaderProps()),{},{children:Object(M.jsx)("div",{children:e.canFilter?e.render("Filter"):null})}))}))}))}))]})),Object(M.jsx)("tbody",Object(f.a)(Object(f.a)({},p()),{},{children:O.map((function(e,t){g(e);var r=o(e);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("tr",Object(f.a)(Object(f.a)({},e.getRowProps(r)),{},{children:e.cells.map((function(e){return Object(M.jsx)("td",Object(f.a)(Object(f.a)({style:{verticalAlign:"middle"}},e.getCellProps()),{},{children:e.render("Cell")}))}))})),e.isExpanded&&i({row:e,rowProps:r,visibleColumns:Q})]})}))}))]}),Object(M.jsx)("div",{className:"pagination pull-right",children:Object(M.jsxs)(k.a,{children:[Object(M.jsxs)(L.a,{children:[Object(M.jsx)(v.a,{bsStyle:"success",onClick:function(){return T(0)},disabled:!C,children:Object(M.jsx)(S.a,{glyph:"step-backward"})})," ",Object(M.jsx)(v.a,{bsStyle:"success",onClick:function(){return V()},disabled:!C,children:Object(M.jsx)(S.a,{glyph:"triangle-left"})})," ",Object(M.jsx)(v.a,{bsStyle:"success",onClick:function(){return I()},disabled:!_,children:Object(M.jsx)(S.a,{glyph:"triangle-right"})})," ",Object(M.jsx)(v.a,{bsStyle:"success",onClick:function(){return T(R-1)},disabled:!_,children:Object(M.jsx)(S.a,{glyph:"step-forward"})})]}),Object(M.jsxs)(L.a,{children:[Object(M.jsx)(v.a,{active:!0,bsStyle:"success",children:"Page Size:"})," ",Object(M.jsx)(P.a,{id:"pageSizeDropdown",bsStyle:"success",title:U,onSelect:function(e){G(Number(e))},children:[20,50,100,1e6].map((function(e){return Object(M.jsxs)(D.a,{id:e,eventKey:e,value:e,children:["Show ",e]},e)}))})]})]})}),Object(M.jsx)("div",{className:"pagination pull-left",children:Object(M.jsxs)(L.a,{children:[Object(M.jsx)(v.a,{active:!0,bsStyle:"info",children:Object(M.jsx)(M.Fragment,{children:E.length>0?Object(M.jsxs)(M.Fragment,{children:["Page"," ",Object(M.jsxs)("strong",{children:[K+1," of ",E.length]})]}):Object(M.jsxs)(M.Fragment,{children:["Page ",Object(M.jsx)("strong",{children:"- of -"})]})})})," ",r?Object(M.jsx)(y.a,{placement:"bottom",overlay:A({message:"Refreshing Data"}),children:Object(M.jsx)(v.a,{bsStyle:"info",children:Object(M.jsx)(S.a,{className:"glyphicon-refresh-animate",glyph:"refresh"})})}):Object(M.jsx)(y.a,{placement:"bottom",overlay:A({message:"Data Loaded: "+(new Date).toLocaleString()}),children:Object(M.jsx)(v.a,{bsStyle:"info",children:Object(M.jsx)(S.a,{glyph:"ok"})})})]})})]})},T=r(37),I=r(38),V=r(39),G=r(159),Q=function(e){Object(V.a)(r,e);var t=Object(G.a)(r);function r(e){var n;return Object(T.a)(this,r),(n=t.call(this,e)).state={error:null,errorInfo:null},n}return Object(I.a)(r,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?Object(M.jsx)(z,{}):this.props.children}}]),r}(a.a.Component),J=(r(146),r(292)),K={1884:"#0D98BA",1921:"#FFAA1D",1920:"#4B8B3B",1922:"#E86100",1923:"#9B1C31"},U=function(){return Object(M.jsx)("div",{className:"flex-container",children:Object(M.jsxs)("div",{className:"text-center",children:[Object(M.jsx)(l.a,{bsSize:"small",style:{backgroundColor:K[1884],margin:"5px"},children:"Ubiquitous Moon Asteroids"}),Object(M.jsx)(l.a,{bsSize:"small",style:{backgroundColor:K[1920],margin:"5px"},children:"Common Moon Asteroids"}),Object(M.jsx)(l.a,{bsSize:"small",style:{backgroundColor:K[1921],margin:"5px"},children:"Uncommon Moon Asteroids"}),Object(M.jsx)(l.a,{bsSize:"small",style:{backgroundColor:K[1922],margin:"5px"},children:"Rare Moon Asteroids"}),Object(M.jsx)(l.a,{bsSize:"small",style:{backgroundColor:K[1923],margin:"5px"},children:"Exceptional Moon Asteroids"})]})})},W=Intl.DateTimeFormat("default",{year:"numeric",month:"long",day:"numeric"}),q=Intl.DateTimeFormat("default",{hour:"numeric",minute:"numeric",hour12:!1}),X=function(){var e=Object(u.useQuery)(["extractions"],(function(){return function(){return p.apply(this,arguments)}()}),{initialData:[]}),t=e.isLoading,r=e.isFetching,n=e.error,c=e.data,s=a.a.useMemo((function(){return[{Header:"Frack Arrival",accessor:"extraction_end",Cell:function(e){return Object(M.jsxs)("h5",{className:"text-center",children:[W.format(Date.parse(e.value))," ",q.format(Date.parse(e.value)),Object(M.jsx)("br",{}),Object(M.jsx)(l.a,{className:"",children:Object(M.jsx)(J.a,{date:Date.parse(e.value)})})]})}},{Header:"Moon Name",accessor:"moon.name",Filter:E,filter:function(e,t,r){return e.filter((function(e){return t.some((function(t){if(r){var n=e.values[t];return n+=" ",n+=e.original.ObserverName,n+=" ",!!(n+=e.original.constellation)&&n.toLowerCase().includes(r.toLowerCase())}return!0}))}))},Cell:function(e){return Object(M.jsxs)("div",{className:"text-center",children:[Object(M.jsx)("h4",{children:e.value}),Object(M.jsx)("br",{}),Object(M.jsx)("h5",{children:e.cell.row.original.ObserverName}),Object(M.jsx)("h5",{children:e.cell.row.original.constellation})]})}},{Header:"Jackpot",accessor:"jackpot",Cell:function(e){return e.value?Object(M.jsx)("div",{className:"text-center jackpot",children:Object(M.jsx)("i",{class:"fas fa-award",style:{fontSize:"64px"}})}):Object(M.jsx)(M.Fragment,{})}},{Header:"Ore Composition",accessor:"mined_ore",Filter:function(e){var t=e.column,r=t.setFilter,n=t.filterValue,c=t.preFilteredRows,s=t.id,l=a.a.useMemo((function(){var e=new Set;return c?(c.forEach((function(t){null!==t.values[s]&&t.values[s].forEach((function(t){e.add(t.type.cat)}))})),Object(i.a)(e.values())):[]}),[s,c]);return Object(M.jsx)(C.a,{title:n,onChange:function(e){return r(e.value)},value:{label:n||"All"},defaultValue:{label:"All"},styles:_,options:[{id:-1,value:"",label:"All"}].concat(l.map((function(e,t){return{id:t,value:e,label:e}})))},n)},filter:function(e,t,r){return e.filter((function(e){return t.some((function(t){if(r){var n=e.values[t].reduce((function(e,t){return e+"  "+t.type.cat}),"");return!!n&&n.toLowerCase().includes(r.toLowerCase())}return!0}))}))},Cell:function(e){return e.value?Object(M.jsx)(M.Fragment,{children:Object(M.jsx)("div",{className:"",children:e.value.map((function(t){var r=Number(t.volume/t.total_volume*100).toFixed(1);return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{style:{display:"flex",alignContent:"center",justifyContent:"center"},children:[Object(M.jsx)("img",{alt:t.type.name,style:{width:"30px",height:"30px",margin:"15px",borderRadius:"30px",backgroundColor:K[t.type.cat_id]},src:"https://images.evetech.net/types/"+t.type.id+"/icon"}),Object(M.jsxs)("div",{style:{flexGrow:1},children:[Object(M.jsxs)("h5",{children:[t.type.name," ",Object(M.jsxs)(l.a,{style:{marginLeft:"5px"},className:"",children:[(t.total_volume/e.cell.row.original.total_m3*100).toFixed(0),"%"]}),t.value>0?Object(M.jsxs)(l.a,{className:"",style:{marginLeft:"5px"},children:["$",Number(t.value/1e9).toFixed(2),"B Mined"]}):Object(M.jsx)(M.Fragment,{}),Object(M.jsx)(l.a,{className:"pull-right",bsSize:"small",style:{backgroundColor:K[t.type.cat_id]},children:t.type.cat})]}),Object(M.jsx)("div",{className:"progress",style:{margin:"0px"},children:Object(M.jsxs)("div",{className:r>70?"progress-bar progress-bar-striped progress-bar-warning":"progress-bar progress-bar-striped progress-bar-info active",style:{width:r+"%",color:"black"},children:[r,"% Mined"]})})]})]})})}))})}):Object(M.jsx)(M.Fragment,{})}}]}),[]);return Object(M.jsxs)(Q,{children:[Object(M.jsx)("h5",{className:"text-center small",children:"Key:"}),Object(M.jsx)(U,{}),Object(M.jsx)("br",{}),Object(M.jsx)(o.a,{children:Object(M.jsx)(o.a.Body,{children:Object(M.jsx)(R,{isLoading:t,isFetching:r,data:c,columns:s,error:n,defaultSort:[{id:"extraction_end",desc:!0}]})})})]})},$=Intl.DateTimeFormat("default",{year:"numeric",month:"long",day:"numeric"}),Y=Intl.DateTimeFormat("default",{hour:"numeric",minute:"numeric",hour12:!1}),Z=function(){var e=Object(u.useQuery)(["future-extractions"],(function(){return function(){return m.apply(this,arguments)}()}),{initialData:[]}),t=e.isLoading,r=e.isFetching,n=e.error,c=e.data,s=a.a.useMemo((function(){return[{Header:"Frack Arrival",accessor:"extraction_end",Cell:function(e){return Object(M.jsxs)("h5",{className:"text-center",children:[$.format(Date.parse(e.value))," ",Y.format(Date.parse(e.value)),Object(M.jsx)("br",{}),Object(M.jsx)(l.a,{className:"",children:Object(M.jsx)(J.a,{date:Date.parse(e.value)})})]})}},{Header:"Moon Name",accessor:"moon.name",Filter:E,filter:function(e,t,r){return e.filter((function(e){return t.some((function(t){if(r){var n=e.values[t];return n+=" ",n+=e.original.ObserverName,n+=" ",!!(n+=e.original.constellation)&&n.toLowerCase().includes(r.toLowerCase())}return!0}))}))},Cell:function(e){return Object(M.jsxs)("div",{className:"text-center",children:[Object(M.jsx)("h4",{children:e.value}),Object(M.jsx)("br",{}),Object(M.jsx)("h5",{children:e.cell.row.original.ObserverName}),Object(M.jsx)("h5",{children:e.cell.row.original.constellation})]})}},{Header:"Ore Composition",accessor:"mined_ore",Filter:function(e){var t=e.column,r=t.setFilter,n=t.filterValue,c=t.preFilteredRows,s=t.id,l=a.a.useMemo((function(){var e=new Set;return c?(c.forEach((function(t){null!==t.values[s]&&t.values[s].forEach((function(t){e.add(t.type.cat)}))})),Object(i.a)(e.values())):[]}),[s,c]);return Object(M.jsx)(C.a,{title:n,onChange:function(e){return r(e.value)},value:{label:n||"All"},defaultValue:{label:"All"},styles:_,options:[{id:-1,value:"",label:"All"}].concat(l.map((function(e,t){return{id:t,value:e,label:e}})))},n)},filter:function(e,t,r){return e.filter((function(e){return t.some((function(t){if(r){var n=e.values[t].reduce((function(e,t){return e+"  "+t.type.cat}),"");return!!n&&n.toLowerCase().includes(r.toLowerCase())}return!0}))}))},Cell:function(e){return e.value?Object(M.jsx)("div",{className:"",children:e.value.map((function(t){var r=(t.total_volume/e.cell.row.original.total_m3*100).toFixed(0);return Object(M.jsxs)("div",{style:{display:"flex",alignContent:"center",justifyContent:"center"},children:[Object(M.jsx)("img",{alt:t.type.name,style:{width:"30px",height:"30px",margin:"15px",borderRadius:"30px",backgroundColor:K[t.type.cat_id]},src:"https://images.evetech.net/types/"+t.type.id+"/icon"}),Object(M.jsxs)("div",{style:{flexGrow:1},children:[Object(M.jsxs)("h5",{children:[t.type.name," ",Object(M.jsxs)(l.a,{style:{marginLeft:"5px"},className:"",children:[r,"%"]}),Object(M.jsx)(l.a,{className:"pull-right",bsSize:"small",style:{backgroundColor:K[t.type.cat_id]},children:t.type.cat})]}),Object(M.jsx)("div",{className:"progress",style:{minWidth:"40vw",margin:"0px"},children:Object(M.jsxs)("div",{className:"progress-bar progress-bar-striped progress-bar-info active",style:{width:r+"%",color:"black",backgroundColor:K[t.type.cat_id]},children:[r,"%"]})})]})]})}))}):Object(M.jsx)(M.Fragment,{})}}]}),[]);return Object(M.jsxs)(Q,{children:[Object(M.jsx)("h5",{className:"text-center small",children:"Key:"}),Object(M.jsx)(U,{}),Object(M.jsx)("br",{}),Object(M.jsx)(o.a,{children:Object(M.jsx)(o.a.Body,{children:Object(M.jsx)(R,{isLoading:t,isFetching:r,data:c,columns:s,error:n,defaultSort:[{id:"extraction_end",desc:!1}]})})})]})},ee=r(158),te=r(291),re=function(){return Object(M.jsx)(o.a.Body,{className:"flex-container",children:Object(M.jsx)(F.a,{className:"spinner-size"})})},ne=r(105),ae=r(16),ce=r(290),se=r(295),ie=r(289),le=r(1),oe=function(e){var t=Object(ae.g)();Object(n.useEffect)((function(){}),[t]);var r=window.location.href.endsWith(e.href)?"active":"";return Object(M.jsx)(ie.a,Object(f.a)(Object(f.a)({className:r},e),{},{children:e.children}))};oe.contextTypes={router:r.n(le).a.object};var ue=oe,je=function(e){var t=e.futureExtractions,r=void 0!==t&&t;e.observers;return Object(M.jsxs)(se.a,{fluid:!0,collapseOnSelect:!0,children:[Object(M.jsx)(se.a.Header,{children:Object(M.jsx)(se.a.Toggle,{})}),Object(M.jsx)(se.a.Collapse,{children:Object(M.jsxs)(ce.a,{children:[Object(M.jsx)(se.a.Brand,{children:"Moon Board"}),Object(M.jsx)(ue,{href:"#/active",children:"Active Moons"},"active"),r?Object(M.jsx)(ue,{href:"#/future",children:"Future Extractions"},"future"):Object(M.jsx)(M.Fragment,{})]})})]})};te.a.addDefaultLocale(ee);var de=function(){var e=Object(u.useQuery)(["perms"],(function(){return function(){return O.apply(this,arguments)}()})),t=e.isLoading,r=e.data;return t?Object(M.jsx)(re,{}):Object(M.jsxs)(ne.a,{children:[Object(M.jsx)("br",{}),Object(M.jsx)(je,{futureExtractions:r.view_observations}),Object(M.jsxs)(ae.d,{children:[Object(M.jsx)(ae.b,{exact:!0,path:"/",component:function(){return Object(M.jsx)(ae.a,{to:"/active"})}}),Object(M.jsx)(ae.b,{path:"/active",component:function(){return X()}}),r.view_observations?Object(M.jsx)(ae.b,{path:"/future",component:function(){return Z()}}):Object(M.jsx)(M.Fragment,{})]})]})},be=new u.QueryClient;s.a.render(Object(M.jsx)(a.a.StrictMode,{children:Object(M.jsx)(u.QueryClientProvider,{client:be,children:Object(M.jsx)(de,{})})}),document.getElementById("root"))}},[[277,1,2]]]);
//# sourceMappingURL=main.a36bd866.chunk.js.map
